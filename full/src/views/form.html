<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Management</title>
    <link rel="stylesheet" href="/public/user-form.css" type="text/css" />

</head>

<body>
    <section class="btn">
        <a href="/user">User List</a>
    </section>

    <section class="form-container">
        <h2>User Registration</h2>
        <form id="userForm">
            <label for="name">First Name:</label>
            <input type="text" id="firstName" name="firstName" required>

            <label for="name">Last Name:</label>
            <input type="text" id="lastName" name="lastName" required>

            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>

            <label for="avatar">Avatar URL:</label>
            <input type="url" id="avatar" name="avatar">

            <label for="birthday">Birthday:</label>
            <input type="date" id="birthday" name="birthday">

            <label for="sex">Sex:</label>
            <select id="sex" name="sex">
                <option value="male">Male</option>
                <option value="female">Female</option>
            </select>

            <label for="subscriptionTier">Subscription Tier:</label>
            <select id="subscriptionTier" name="subscriptionTier">
                <option value="free">Free</option>
                <option value="basic">Basic</option>
                <option value="business">Business</option>
            </select>

            <button type="submit">Register</button>
        </form>
    </section>

    <script>
        document.getElementById('userForm').addEventListener('submit', async (e) => {
            e.preventDefault();


            const formData = {
                firstName: document.getElementById('firstName')?.value,
                lastName: document.getElementById('lastName')?.value,
                email: document.getElementById('email')?.value,
                phone: document.getElementById('phone')?.value,
                avatar: document.getElementById('avatar')?.value,
                birthday: document.getElementById('birthday')?.value,
                sex: document.getElementById('sex')?.value,
                subscriptionTier: document.getElementById('subscriptionTier')?.value,
            };

            console.log('>>> Form submitted', formData);

            const response = await fetch('/api/user', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(formData),
            });

            const data = await response.json();
            window.location.href = '/user';
            e.target.reset();
        });
    </script>
</body>

</html>